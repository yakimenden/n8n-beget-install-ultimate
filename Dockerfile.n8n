dockerfile
FROM n8nio/n8n:latest

USER root

# –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –ø–∞–∫–µ—Ç—ã Alpine
RUN apk update && apk upgrade --no-cache

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (–≤–∫–ª—é—á–∞—è docker-cli, 7zip, –∏ –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
RUN apk add --no-cache \
    bash \
    curl \
    git \
    make \
    g++ \
    gcc \
    python3 \
    py3-pip \
    libffi-dev \
    yt-dlp \
    apache2-utils \
    ffmpeg \
    docker-cli \
    postgresql-client \
    p7zip

# –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É docker –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è node (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ docker)
ARG DOCKER_GID=999
RUN addgroup -S -g ${DOCKER_GID} docker 2>/dev/null || true && \
    addgroup node docker 2>/dev/null || true

# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º npm
RUN npm config set fund false && npm config set audit false

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ npm –ø–∞–∫–µ—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
RUN for pkg in \
    axios \
    node-fetch \
    form-data \
    moment \
    date-fns \
    lodash \
    fs-extra \
    csv-parser \
    xml2js \
    js-yaml \
    xlsx \
    jsonwebtoken \
    uuid \
    openai \
    langchain \
    node-telegram-bot-api \
    discord.js \
    mongoose \
    ioredis \
    bcrypt \
    validator \
    joi \
    winston \
    dotenv \
    prom-client \
    adm-zip \
    archiver; do \
    echo "üîß –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º $pkg..." && npm install -g "$pkg" --silent || echo "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å $pkg"; \
done

USER node

EXPOSE 5678
